name: "CodeQL"

on: push

jobs:
  analyze:
    name: Analyze
    runs-on: ubuntu-latest
    # runs-on: windows-2016

    strategy:
      fail-fast: false
      matrix:
        language: [ 'csharp' ] #後で変更
        # language: [ 'csharp', 'javascript' ] #後で変更

    steps:
      - name: Initialize CodeQL
        uses: github/codeql-action/init@v1
        with:
          languages: ${{ matrix.language }}

      - name: Checkout
        uses: actions/checkout@v2

      - name: Setup MSBuild.exe
        uses: microsoft/setup-msbuild@v1.0.2
        with:
          vs-version: '[10.0,16.0)'

      - name: Setup NuGet.exe
        uses: nuget/setup-nuget@v1

      - name: Restore NuGet package
        run: nuget restore ./WebGoat.NET.sln
        # run: nuget restore ./Isid.Positive.Mobile.sln

      - name: Build Project1 (release)
        run: msbuild ./WebGoat/WebGoat.NET.csproj /t:Rebuild /p:config=release
        # run: msbuild ./Isid.Positive.Mobile/Isid.Positive.Mobile.csproj /t:Rebuild /p:config=release

      - name: Perform CodeQL Analysis
        uses: github/codeql-action/analyze@v1
